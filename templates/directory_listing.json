[
  <% let mut entries = entries.iter().peekable(); %>
  <% while let Some(entry) = entries.next() { %>
    {
      "name":<%= entry.name | json %>,
      "type":<% if entry.is_dir { %>"directory"<% } else { %>"file"<% } %>,
      <% if !entry.is_dir { %>
        "size":<%= entry.filesize %>,
      <% } %>
      "mtime":<%= entry.modified.map_or("".to_owned(), |local_dt| {
        local_dt
            .with_timezone(&chrono::Utc)
            .format(DATETIME_FORMAT_UTC)
            .to_string()
      }) | json %>
    }<% if entries.peek().is_some() { %>,<% } %>
  <% } %>
]
